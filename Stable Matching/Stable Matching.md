# Stable Matching是什么

### 定义

Stable Matching是一种算法，**用于解决两个集合中的每个元素之间的匹配问题**。它最初被提出用于医学院的招生匹配，但现在已经被广泛应用于各种领域，如就业招聘、婚姻匹配等。

在Stable Matching算法中，有两个集合：一个集合是男性，另一个集合是女性。每个男性和女性都有自己的首选项列表，用于指定他们对另一个集合中的元素的偏好程度。Stable Matching算法的目标是为每个男性和女性匹配一个最佳的伴侣，使得没有两个人能够在彼此更喜欢的情况下离开他们的匹配。

### 算法基本思想

**算法的基本思想**是通过一系列迭代来构建稳定的匹配。在每个迭代中，男性和女性中的每个人都会尝试与其首选对象匹配。如果一个男性和女性都彼此选择了对方作为他们的首选对象，那么他们就被匹配在一起。如果一个男性被多个女性选择，那么他将与他最喜欢的女性匹配。如果一个女性被多个男性选择，那么她将选择她最喜欢的男性并拒绝其他人。在每个迭代之后，未匹配的男性和女性将重新开始选择他们的下一个最佳伴侣，直到所有人都被匹配为止。

### 算法的结果

通过这种方式，Stable Matching算法可以确保匹配是**稳定的（stable）**，即不存在两个人可以在彼此更喜欢的情况下离开他们的匹配。这种算法在实际应用中被广泛使用，因为它可以解决很多实际问题，并且可以通过计算机程序进行有效实现。

# blocking pair

### 定义

在稳定匹配问题中，如果存在一个男性和一个女性，他们彼此喜欢对方更多于他们当前的伴侣，则称这对男女为“blocking pair”。这对男女可以离开他们的当前伴侣并在一起形成一个更喜欢的匹配。

一个稳定匹配是指不存在任何的blocking pair，也就是说，在这个匹配中没有男女会离开他们的伴侣。如果存在blocking pair，则需要对匹配进行重新调整，直到找到一个没有blocking pair的稳定匹配。

### 例子

例如，在一个4个男性和4个女性的例子中，如果男性A当前与女性W匹配，但他更喜欢女性X，而女性X也更喜欢男性A，那么这对男女就构成了一个blocking pair。这对男女可以离开他们当前的伴侣并在一起形成一个更稳定的匹配。

# Gale-Shapley algorithm

### 是什么

Gale-Shapley算法是一种用于解决稳定婚姻问题（Stable Marriage Problem）的算法，由美国数学家David Gale和Lloyd Shapley于1962年提出。该算法可以保证找到一个稳定的匹配，**并且在最坏情况下的时间复杂度为O(n^2)**。

### 基本思想

稳定婚姻问题是指假设有n个男性和n个女性，每个人都有一个首选列表，其中数字表示他们对另一个集合中的人的偏好程度，数字越小表示偏好程度越高。问题是如何找到一个稳定的匹配，使得每个人都与最喜欢的伴侣匹配，并且没有两个人可以在彼此更喜欢的情况下离开他们的匹配。

Gale-Shapley算法的基本思想是，从男性的角度出发，让每个男性依次向他们的首选女性发出邀请，直到每个男性都有一个伴侣。在这个过程中，每个女性会选择她最喜欢的邀请，如果她已经有了伴侣，那么她会比较新邀请和她当前的伴侣，并选择她更喜欢的那个。

如果一个女性收到了多个邀请，她会选择她最喜欢的邀请，并拒绝其他邀请。如果一个男性被拒绝，他会向他的下一个最喜欢的女性发出邀请，重复这个过程，直到他找到了一个伴侣。

当所有男性都有了伴侣时，算法就结束了。最后的匹配就是一个稳定的匹配，因为不存在任何的blocking pair。这是因为，在Gale-Shapley算法中，每个男性都是依次向他们的首选女性发出邀请的，因此，当一个男性被拒绝时，他会继续向他的下一个最喜欢的女性发出邀请，直到他找到一个伴侣。这确保了每个男性都会找到最喜欢的伴侣，并且没有男女会离开他们的伴侣。
